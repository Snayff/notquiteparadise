
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>scripts.engine.core.component &#8212; NotQuiteParadise  documentation</title>
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/material.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=deep-purple data-md-color-accent=deep-orange>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#_modules/scripts/engine/core/component" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../../index.html" title="NotQuiteParadise  documentation"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">&#xe869</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Not Quite Paradise</span>
          <span class="md-header-nav__topic"> scripts.engine.core.component </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/Snayff/notquiteparadise" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Not Quite Paradise
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../../"versions.json"",
        target_loc = "../../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../../../index.html" class="md-tabs__link">NotQuiteParadise  documentation</a></li>
          <li class="md-tabs__item"><a href="../../../index.html" class="md-tabs__link">Module code</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../../index.html" title="NotQuiteParadise documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">&#xe869</i>
      
    </a>
    <a href="../../../../index.html"
       title="NotQuiteParadise documentation">Not Quite Paradise</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/Snayff/notquiteparadise" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Not Quite Paradise
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../../../../info/_info.html" class="md-nav__link">Info</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../engine/_engine.html" class="md-nav__link">Engine API</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../nqp/_nqp.html" class="md-nav__link">NQP Documentation</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
    

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <h1 id="modules-scripts-engine-core-component--page-root">Source code for scripts.engine.core.component</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">asdict</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">snecs</span> <span class="kn">import</span> <span class="n">RegisteredComponent</span>
<span class="kn">from</span> <span class="nn">snecs.typedefs</span> <span class="kn">import</span> <span class="n">EntityID</span>

<span class="kn">from</span> <span class="nn">scripts.engine.internal</span> <span class="kn">import</span> <span class="n">library</span>
<span class="kn">from</span> <span class="nn">scripts.engine.internal.constant</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">HeightType</span><span class="p">,</span>
    <span class="n">PrimaryStat</span><span class="p">,</span>
    <span class="n">PrimaryStatType</span><span class="p">,</span>
    <span class="n">ReactionTriggerType</span><span class="p">,</span>
    <span class="n">RenderLayer</span><span class="p">,</span>
    <span class="n">SecondaryStat</span><span class="p">,</span>
    <span class="n">SecondaryStatType</span><span class="p">,</span>
    <span class="n">SpriteCategory</span><span class="p">,</span>
    <span class="n">SpriteCategoryType</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">scripts.engine.internal.definition</span> <span class="kn">import</span> <span class="n">ReactionData</span>
<span class="kn">from</span> <span class="nn">scripts.engine.internal.event</span> <span class="kn">import</span> <span class="n">event_hub</span><span class="p">,</span> <span class="n">ShrineMenuEvent</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

    <span class="kn">import</span> <span class="nn">pygame</span>

    <span class="kn">from</span> <span class="nn">scripts.engine.internal.action</span> <span class="kn">import</span> <span class="n">Affliction</span><span class="p">,</span> <span class="n">Behaviour</span><span class="p">,</span> <span class="n">Skill</span><span class="p">,</span> <span class="n">SkillModifier</span>
    <span class="kn">from</span> <span class="nn">scripts.engine.internal.definition</span> <span class="kn">import</span> <span class="n">TraitSpritePathsData</span><span class="p">,</span> <span class="n">TraitSpritesData</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Exists"</span><span class="p">,</span>
    <span class="s2">"IsPlayer"</span><span class="p">,</span>
    <span class="s2">"IsActive"</span><span class="p">,</span>
    <span class="s2">"CombatStats"</span><span class="p">,</span>
    <span class="s2">"WinCondition"</span><span class="p">,</span>
    <span class="s2">"MapCondition"</span><span class="p">,</span>
    <span class="s2">"Shrine"</span><span class="p">,</span>
    <span class="s2">"Position"</span><span class="p">,</span>
    <span class="s2">"Aesthetic"</span><span class="p">,</span>
    <span class="s2">"Tracked"</span><span class="p">,</span>
    <span class="s2">"Resources"</span><span class="p">,</span>
    <span class="s2">"Physicality"</span><span class="p">,</span>
    <span class="s2">"Identity"</span><span class="p">,</span>
    <span class="s2">"Traits"</span><span class="p">,</span>
    <span class="s2">"Thought"</span><span class="p">,</span>
    <span class="s2">"Knowledge"</span><span class="p">,</span>
    <span class="s2">"Afflictions"</span><span class="p">,</span>
    <span class="s2">"Opinion"</span><span class="p">,</span>
    <span class="s2">"FOV"</span><span class="p">,</span>
    <span class="s2">"LightSource"</span><span class="p">,</span>
    <span class="s2">"Reaction"</span><span class="p">,</span>
    <span class="s2">"Lifespan"</span><span class="p">,</span>
    <span class="s2">"Immunities"</span><span class="p">,</span>
    <span class="s2">"Sight"</span><span class="p">,</span>
    <span class="s2">"NQPComponent"</span><span class="p">,</span>
<span class="p">]</span>


<span class="c1">##########################################################</span>
<span class="c1"># Components are to hold data that is subject to change.</span>
<span class="c1">#########################################################</span>


<div class="viewcode-block" id="NQPComponent"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.NQPComponent">[docs]</a><span class="k">class</span> <span class="nc">NQPComponent</span><span class="p">(</span><span class="n">RegisteredComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Subclass snecs' RegisteredComponent to extend with an on_delete method</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="NQPComponent.on_delete"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.NQPComponent.on_delete">[docs]</a>    <span class="k">def</span> <span class="nf">on_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<span class="c1">########################### FLAGS ##############################</span>


<div class="viewcode-block" id="Exists"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Exists">[docs]</a><span class="k">class</span> <span class="nc">Exists</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Empty flag for all entities. Used to allow filters to search for a single component i.e. use a single condition.</span>
<span class="sd">    """</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="Exists.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Exists.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Exists.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Exists.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Exists</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="IsPlayer"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsPlayer">[docs]</a><span class="k">class</span> <span class="nc">IsPlayer</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Whether the entity is the player.</span>
<span class="sd">    """</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>  <span class="c1"># reduces memory footprint as it prevents the creation of __dict__ and __weakref__ per instance</span>

<div class="viewcode-block" id="IsPlayer.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsPlayer.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="IsPlayer.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsPlayer.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">IsPlayer</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="IsActive"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsActive">[docs]</a><span class="k">class</span> <span class="nc">IsActive</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Whether the entity is active or not. Used to limit entity processing.</span>
<span class="sd">    """</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="IsActive.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsActive.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="IsActive.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.IsActive.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">IsActive</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="WinCondition"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.WinCondition">[docs]</a><span class="k">class</span> <span class="nc">WinCondition</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A flag to show that an entity is a win objective</span>
<span class="sd">    """</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="WinCondition.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.WinCondition.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="WinCondition.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.WinCondition.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WinCondition</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="MapCondition"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.MapCondition">[docs]</a><span class="k">class</span> <span class="nc">MapCondition</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A flag to show that an entity will take the player to the next map</span>
<span class="sd">    """</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="MapCondition.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.MapCondition.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="MapCondition.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.MapCondition.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MapCondition</span><span class="p">()</span></div></div>

<div class="viewcode-block" id="Shrine"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Shrine">[docs]</a><span class="k">class</span> <span class="nc">Shrine</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    The component for tracking information relevant to shrines.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Shrine.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Shrine.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">associated_blessings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SkillModifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">used</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blessings_count</span> <span class="o">=</span> <span class="mi">4</span></div>

<div class="viewcode-block" id="Shrine.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Shrine.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Shrine.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Shrine.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Shrine</span><span class="p">()</span></div>

<div class="viewcode-block" id="Shrine.interact"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Shrine.interact">[docs]</a>    <span class="k">def</span> <span class="nf">interact</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">scripts.engine.core.matter</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">associated_blessings</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">associated_blessings</span> <span class="o">=</span> <span class="n">scripts</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">matter</span><span class="o">.</span><span class="n">create_compatible_blessings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blessings_count</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">used</span><span class="p">:</span>
            <span class="n">event_hub</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">ShrineMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">associated_blessings</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">used</span> <span class="o">=</span> <span class="kc">True</span></div></div>


<span class="c1">#################### OTHERS #########################</span>


<div class="viewcode-block" id="Position"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position">[docs]</a><span class="k">class</span> <span class="nc">Position</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's position on the map. At initiation provide all positions the entity holds. After initiation only need</span>
<span class="sd">     to set the top left, or reference position as the other coordinates are held as offsets.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Position.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">positions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
        <span class="c1"># Sort the positions from top-left to down-right</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">positions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Must provide at least 1 coordinate for the entity."</span><span class="p">)</span>

        <span class="n">sorted_positions</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">top_left</span> <span class="o">=</span> <span class="n">sorted_positions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span> <span class="o">-</span> <span class="n">top_left</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">-</span> <span class="n">top_left</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">sorted_positions</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference_position</span> <span class="o">=</span> <span class="n">top_left</span></div>

<div class="viewcode-block" id="Position.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span></div>

<div class="viewcode-block" id="Position.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Position</span><span class="p">(</span><span class="o">*</span><span class="n">serialised</span><span class="p">)</span></div>

<div class="viewcode-block" id="Position.set"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference_position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Position.get_outermost"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Position.get_outermost">[docs]</a>    <span class="k">def</span> <span class="nf">get_outermost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="sd">"""</span>
<span class="sd">        Calculate the outermost tile in the direction provided</span>
<span class="sd">        :param direction: Direction to use</span>
<span class="sd">        :return: The position of the outermost tile</span>
<span class="sd">        """</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span>
        <span class="c1"># Calculate center</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">))</span>
        <span class="n">transformed</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">((</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">direction</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]</span>
        <span class="c1"># Find the coordinate that is nearest the direction</span>
        <span class="n">arg_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">transformed</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">transformed</span><span class="p">))</span>
        <span class="c1"># From all the nearest coordinates find the one nearest to the center of the entity</span>
        <span class="n">arg_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">transformed</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">transformed</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arg_max</span>
        <span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">coordinates</span><span class="p">[</span><span class="n">arg_max</span><span class="p">[</span><span class="n">arg_min</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="n">arg_max</span><span class="p">[</span><span class="n">arg_min</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        :return: The x component of the top-left position</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        :return: The y component of the top-left position</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">reference_position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
        <span class="sd">"""</span>
<span class="sd">        :return: The list of coordinates that this Position represents</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
        <span class="sd">"""</span>
<span class="sd">        :param key: Coordinate to test against</span>
<span class="sd">        :return: A bool that represents if the Position contains the provided coordinates</span>
<span class="sd">        """</span>
        <span class="k">for</span> <span class="n">coordinate</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordinates</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">coordinate</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Aesthetic"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic">[docs]</a><span class="k">class</span> <span class="nc">Aesthetic</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's sprite.</span>

<span class="sd">    N.B. translation to screen coordinates is handled by the camera</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Aesthetic.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sprites</span><span class="p">:</span> <span class="n">TraitSpritesData</span><span class="p">,</span>
        <span class="n">sprite_paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TraitSpritePathsData</span><span class="p">],</span>
        <span class="n">render_layer</span><span class="p">:</span> <span class="n">RenderLayer</span><span class="p">,</span>
        <span class="n">draw_pos</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sprite_paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TraitSpritePathsData</span><span class="p">]</span> <span class="o">=</span> <span class="n">sprite_paths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sprites</span><span class="p">:</span> <span class="n">TraitSpritesData</span> <span class="o">=</span> <span class="n">sprites</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite</span><span class="p">:</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprites</span><span class="o">.</span><span class="n">idle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite_category</span><span class="p">:</span> <span class="n">SpriteCategoryType</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprites</span><span class="p">,</span> <span class="n">SpriteCategory</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_layer</span> <span class="o">=</span> <span class="n">render_layer</span>

        <span class="n">draw_x</span><span class="p">,</span> <span class="n">draw_y</span> <span class="o">=</span> <span class="n">draw_pos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">draw_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">draw_y</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">target_draw_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">draw_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_draw_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">draw_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Aesthetic.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># loop all sprite paths and convert to dict</span>
        <span class="n">sprite_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sprite_path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sprite_paths</span><span class="p">:</span>
            <span class="n">sprite_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asdict</span><span class="p">(</span><span class="n">sprite_path</span><span class="p">))</span>

        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"draw_pos"</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_draw_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_draw_y</span><span class="p">),</span>  <span class="c1"># use target to align with actual position</span>
            <span class="s2">"render_layer"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_layer</span><span class="p">,</span>
            <span class="s2">"sprite_paths"</span><span class="p">:</span> <span class="n">sprite_paths</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Aesthetic.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"draw_pos"</span><span class="p">]</span>
        <span class="n">render_layer</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"render_layer"</span><span class="p">]</span>
        <span class="n">_sprite_paths</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"sprite_paths"</span><span class="p">]</span>

        <span class="c1"># unpack sprite paths</span>
        <span class="n">sprite_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.internal.definition</span> <span class="kn">import</span> <span class="n">TraitSpritePathsData</span>

        <span class="k">for</span> <span class="n">sprite_path</span> <span class="ow">in</span> <span class="n">_sprite_paths</span><span class="p">:</span>
            <span class="n">sprite_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TraitSpritePathsData</span><span class="p">(</span><span class="o">**</span><span class="n">sprite_path</span><span class="p">))</span>

        <span class="c1"># convert sprite paths to sprites</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">utility</span>

        <span class="n">sprites</span> <span class="o">=</span> <span class="n">utility</span><span class="o">.</span><span class="n">build_sprites_from_paths</span><span class="p">(</span><span class="n">sprite_paths</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Aesthetic</span><span class="p">(</span><span class="n">sprites</span><span class="p">,</span> <span class="n">sprite_paths</span><span class="p">,</span> <span class="n">render_layer</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span></div>

<div class="viewcode-block" id="Aesthetic.set_current_sprite"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic.set_current_sprite">[docs]</a>    <span class="k">def</span> <span class="nf">set_current_sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sprite_category</span><span class="p">:</span> <span class="n">SpriteCategoryType</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the current sprite. Set current sprite duration to 0.</span>
<span class="sd">        """</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprites</span><span class="p">,</span> <span class="n">sprite_category</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite</span> <span class="o">=</span> <span class="n">sprite</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite_category</span> <span class="o">=</span> <span class="n">sprite_category</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_sprite_duration</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Aesthetic.set_draw_to_target"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Aesthetic.set_draw_to_target">[docs]</a>    <span class="k">def</span> <span class="nf">set_draw_to_target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set draw_x and draw_y to their target values</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_draw_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_draw_y</span></div></div>


<div class="viewcode-block" id="Tracked"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Tracked">[docs]</a><span class="k">class</span> <span class="nc">Tracked</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A component to hold info on activities of an entity</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Tracked.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Tracked.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_spent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time_spent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">time_spent</span></div>

<div class="viewcode-block" id="Tracked.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Tracked.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_spent</span></div>

<div class="viewcode-block" id="Tracked.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Tracked.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Tracked</span><span class="p">(</span><span class="n">serialised</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Resources"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Resources">[docs]</a><span class="k">class</span> <span class="nc">Resources</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's resources. Members align to Resource constants.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Resources.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Resources.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">health</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">stamina</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">health</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">health</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stamina</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">stamina</span></div>

<div class="viewcode-block" id="Resources.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Resources.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">health</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stamina</span></div>

<div class="viewcode-block" id="Resources.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Resources.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Resources</span><span class="p">(</span><span class="o">*</span><span class="n">serialised</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Physicality"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Physicality">[docs]</a><span class="k">class</span> <span class="nc">Physicality</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's physical existence within the world.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Physicality.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Physicality.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks_movement</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">HeightType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocks_movement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">blocks_movement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">:</span> <span class="n">HeightType</span> <span class="o">=</span> <span class="n">height</span></div>

<div class="viewcode-block" id="Physicality.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Physicality.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks_movement</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span></div>

<div class="viewcode-block" id="Physicality.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Physicality.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Physicality</span><span class="p">(</span><span class="o">*</span><span class="n">serialised</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Identity"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Identity">[docs]</a><span class="k">class</span> <span class="nc">Identity</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's identity, such as name and description.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Identity.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Identity.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">description</span></div>

<div class="viewcode-block" id="Identity.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Identity.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span></div>

<div class="viewcode-block" id="Identity.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Identity.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">serialised</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Traits"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Traits">[docs]</a><span class="k">class</span> <span class="nc">Traits</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's traits. Class, archetype, skill set or otherwise defining group.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Traits.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Traits.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trait_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">trait_names</span></div>

<div class="viewcode-block" id="Traits.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Traits.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span></div>

<div class="viewcode-block" id="Traits.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Traits.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Traits</span><span class="p">(</span><span class="n">serialised</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Thought"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Thought">[docs]</a><span class="k">class</span> <span class="nc">Thought</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An ai behaviour to control an entity.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Thought.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Thought.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">behaviour</span><span class="p">:</span> <span class="n">Behaviour</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">behaviour</span> <span class="o">=</span> <span class="n">behaviour</span></div>

<div class="viewcode-block" id="Thought.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Thought.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"behaviour_name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">behaviour</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">"entity"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">behaviour</span><span class="o">.</span><span class="n">entity</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Thought.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Thought.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.internal.data</span> <span class="kn">import</span> <span class="n">store</span>

        <span class="n">behaviour</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">behaviour_registry</span><span class="p">[</span><span class="n">serialised</span><span class="p">[</span><span class="s2">"behaviour_name"</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">Thought</span><span class="p">(</span><span class="n">behaviour</span><span class="p">(</span><span class="n">serialised</span><span class="p">[</span><span class="s2">"entity"</span><span class="p">]))</span></div></div>


<div class="viewcode-block" id="Knowledge"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge">[docs]</a><span class="k">class</span> <span class="nc">Knowledge</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's knowledge, including skills.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Knowledge.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">skills</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">]],</span>
        <span class="n">skill_order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cooldowns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">skills</span> <span class="o">=</span> <span class="n">skills</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">skill_order</span> <span class="o">=</span> <span class="n">skill_order</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">cooldowns</span> <span class="o">=</span> <span class="n">cooldowns</span> <span class="ow">or</span> <span class="p">{}</span>

        <span class="c1"># determine if we need to add cooldowns or not - must be before setting self</span>
        <span class="k">if</span> <span class="n">cooldowns</span><span class="p">:</span>
            <span class="n">_set_cooldown</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_set_cooldown</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># dont override skill order if it has been provided</span>
        <span class="k">if</span> <span class="n">skill_order</span><span class="p">:</span>
            <span class="n">_add_to_order</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_add_to_order</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">skill_order</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">skill_order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cooldowns</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">cooldowns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skills</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># dont set skills here, use learn skill</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">SkillModifier</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">skill_class</span> <span class="ow">in</span> <span class="n">skills</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">skill_class</span><span class="p">,</span> <span class="n">_add_to_order</span><span class="p">,</span> <span class="n">_set_cooldown</span><span class="p">)</span></div>

<div class="viewcode-block" id="Knowledge.set_skill_cooldown"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.set_skill_cooldown">[docs]</a>    <span class="k">def</span> <span class="nf">set_skill_cooldown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Sets the cooldown of a skill</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cooldowns</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Knowledge.add"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skill</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">],</span> <span class="n">add_to_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">set_cooldown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Learn a new skill.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skills</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">skill</span>
        <span class="k">if</span> <span class="n">add_to_order</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skill_order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">set_cooldown</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cooldowns</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Knowledge.can_add_blessing"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.can_add_blessing">[docs]</a>    <span class="k">def</span> <span class="nf">can_add_blessing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skill</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">],</span> <span class="n">blessing</span><span class="p">:</span> <span class="n">SkillModifier</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Check if a blessing can be added to a skill.</span>
<span class="sd">        """</span>

        <span class="c1"># create blessing list for the target skill if it doesn't exist yet</span>
        <span class="k">if</span> <span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># use sets to check for and prevent collisions (modifying the same effect, specified conflicts, duplicates, etc.)</span>
        <span class="n">used_effects</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">blessing_names</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]:</span>
            <span class="n">used_effects</span> <span class="o">=</span> <span class="n">used_effects</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">involved_effects</span><span class="p">)</span>
            <span class="n">blessing_names</span> <span class="o">=</span> <span class="n">blessing_names</span><span class="o">.</span><span class="n">union</span><span class="p">({</span><span class="n">b</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">used_effects</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blessing</span><span class="o">.</span><span class="n">involved_effects</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">blessing</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="n">blessing_names</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">set</span><span class="p">(</span><span class="n">blessing</span><span class="o">.</span><span class="n">conflicts</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">blessing_names</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">blessing</span><span class="o">.</span><span class="n">skill_types</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">skill</span><span class="o">.</span><span class="n">types</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># all requirements met</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Knowledge.add_blessing"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.add_blessing">[docs]</a>    <span class="k">def</span> <span class="nf">add_blessing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skill</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">],</span> <span class="n">blessing</span><span class="p">:</span> <span class="n">SkillModifier</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Add a blessing to a skill.</span>
<span class="sd">        """</span>

        <span class="c1"># generate blessing level (this will probably be moved somewhere else later)</span>
        <span class="n">blessing</span><span class="o">.</span><span class="n">roll_level</span><span class="p">()</span>

        <span class="c1"># check if blessing can be applied and apply if possible</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_add_blessing</span><span class="p">(</span><span class="n">skill</span><span class="p">,</span> <span class="n">blessing</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blessing</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Knowledge.remove_blessing"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.remove_blessing">[docs]</a>    <span class="k">def</span> <span class="nf">remove_blessing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skill</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Skill</span><span class="p">],</span> <span class="n">remove_blessing</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">SkillModifier</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Attempt to remove a blessing.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">remove_blessing</span><span class="o">.</span><span class="n">removable</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">blessing</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">blessing</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="n">remove_blessing</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">skill_blessings</span><span class="p">[</span><span class="n">skill</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">blessing</span><span class="p">)</span>
                        <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Knowledge.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"skill_names"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_names</span><span class="p">,</span> <span class="s2">"cooldowns"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cooldowns</span><span class="p">,</span> <span class="s2">"skill_order"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill_order</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Knowledge.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Knowledge.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">skill_names</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"skill_names"</span><span class="p">]</span>
        <span class="n">cooldowns</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"cooldowns"</span><span class="p">]</span>
        <span class="n">skill_order</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"skill_order"</span><span class="p">]</span>

        <span class="n">skills</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="kn">from</span> <span class="nn">scripts.engine.internal.data</span> <span class="kn">import</span> <span class="n">store</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">skill_names</span><span class="p">:</span>
            <span class="n">skills</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">skill_registry</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">Knowledge</span><span class="p">(</span><span class="n">skills</span><span class="p">,</span> <span class="n">skill_order</span><span class="p">,</span> <span class="n">cooldowns</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Afflictions"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions">[docs]</a><span class="k">class</span> <span class="nc">Afflictions</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's Boons and Banes. held in .active as a list of Affliction.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Afflictions.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Affliction</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">active</span> <span class="o">=</span> <span class="n">active</span> <span class="ow">or</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Affliction</span><span class="p">]</span> <span class="o">=</span> <span class="n">active</span>  <span class="c1"># TODO - should this be a dict for easier querying?</span></div>

<div class="viewcode-block" id="Afflictions.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">active</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">affliction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">active</span><span class="p">[</span><span class="n">affliction</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">affliction</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span>
                <span class="n">affliction</span><span class="o">.</span><span class="n">affected_entity</span><span class="p">,</span>
                <span class="n">affliction</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"active"</span><span class="p">:</span> <span class="n">active</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Afflictions.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">active_dict</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"active"</span><span class="p">]</span>

        <span class="n">active_instances</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="kn">from</span> <span class="nn">scripts.engine.internal.data</span> <span class="kn">import</span> <span class="n">store</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value_tuple</span> <span class="ow">in</span> <span class="n">active_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">_affliction</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">affliction_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">affliction</span> <span class="o">=</span> <span class="n">_affliction</span><span class="p">(</span><span class="n">value_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">active_instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">affliction</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Afflictions</span><span class="p">(</span><span class="n">active_instances</span><span class="p">)</span></div>

<div class="viewcode-block" id="Afflictions.add"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">affliction</span><span class="p">:</span> <span class="n">Affliction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">affliction</span><span class="p">)</span></div>

<div class="viewcode-block" id="Afflictions.remove"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Afflictions.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">affliction</span><span class="p">:</span> <span class="n">Affliction</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">affliction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="c1"># remove from active list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">affliction</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Opinion"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Opinion">[docs]</a><span class="k">class</span> <span class="nc">Opinion</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's views on other entities. {entity, opinion}</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Opinion.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Opinion.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attitudes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">ReactionTriggerType</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">opinions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">EntityID</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">opinions</span> <span class="o">=</span> <span class="n">opinions</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opinions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">EntityID</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">opinions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attitudes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">ReactionTriggerType</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">attitudes</span></div>

<div class="viewcode-block" id="Opinion.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Opinion.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"attitudes"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attitudes</span><span class="p">,</span> <span class="s2">"opinions"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">opinions</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Opinion.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Opinion.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">attitudes</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"attitudes"</span><span class="p">]</span>
        <span class="n">opinions</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">entity</span><span class="p">,</span> <span class="n">opinion</span> <span class="ow">in</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"opinions"</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">opinions</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity</span><span class="p">)]</span> <span class="o">=</span> <span class="n">opinion</span>

        <span class="k">return</span> <span class="n">Opinion</span><span class="p">(</span><span class="n">attitudes</span><span class="p">,</span> <span class="n">opinions</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="FOV"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.FOV">[docs]</a><span class="k">class</span> <span class="nc">FOV</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's field of view. Always starts blank.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="FOV.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.FOV.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">world</span>

        <span class="n">game_map</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">get_game_map</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">game_map</span><span class="o">.</span><span class="n">block_sight_map</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>  <span class="c1"># return of compute_fov is bool</span></div>

<div class="viewcode-block" id="FOV.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.FOV.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fov_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">fov_map</span></div>

<div class="viewcode-block" id="FOV.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.FOV.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">fov</span> <span class="o">=</span> <span class="n">FOV</span><span class="p">()</span>
        <span class="n">fov</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">serialised</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fov</span></div></div>


<div class="viewcode-block" id="LightSource"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.LightSource">[docs]</a><span class="k">class</span> <span class="nc">LightSource</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An emitter of light. Takes the light_id from a Light. The Light must be added to the Lightbox of the</span>
<span class="sd">    Gamemap separately.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="LightSource.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.LightSource.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">light_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">light_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">light_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">radius</span></div>

<div class="viewcode-block" id="LightSource.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.LightSource.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">world</span>

        <span class="n">game_map</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">get_game_map</span><span class="p">()</span>
        <span class="n">light_box</span> <span class="o">=</span> <span class="n">game_map</span><span class="o">.</span><span class="n">light_box</span>
        <span class="n">light</span> <span class="o">=</span> <span class="n">light_box</span><span class="o">.</span><span class="n">get_light</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">light_id</span><span class="p">)</span>

        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"pos"</span><span class="p">:</span> <span class="n">light</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="s2">"radius"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="s2">"colour"</span><span class="p">:</span> <span class="n">light</span><span class="o">.</span><span class="n">colour</span><span class="p">,</span> <span class="s2">"alpha"</span><span class="p">:</span> <span class="n">light</span><span class="o">.</span><span class="n">alpha</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="LightSource.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.LightSource.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">]</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"radius"</span><span class="p">]</span>
        <span class="n">colour</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"colour"</span><span class="p">]</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"alpha"</span><span class="p">]</span>

        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">matter</span>

        <span class="n">light_id</span> <span class="o">=</span> <span class="n">matter</span><span class="o">.</span><span class="n">create_light</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">LightSource</span><span class="p">(</span><span class="n">light_id</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span></div>

<div class="viewcode-block" id="LightSource.on_delete"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.LightSource.on_delete">[docs]</a>    <span class="k">def</span> <span class="nf">on_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Delete the associated light from the Gamemap's Lightbox</span>
<span class="sd">        """</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">world</span>

        <span class="n">light_box</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">get_game_map</span><span class="p">()</span><span class="o">.</span><span class="n">light_box</span>
        <span class="n">light_box</span><span class="o">.</span><span class="n">delete_light</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">light_id</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Reaction"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Reaction">[docs]</a><span class="k">class</span> <span class="nc">Reaction</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Holds info about what triggers are in place and what happens as a result</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Reaction.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Reaction.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reactions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">ReactionTriggerType</span><span class="p">,</span> <span class="n">ReactionData</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reactions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">ReactionTriggerType</span><span class="p">,</span> <span class="n">ReactionData</span><span class="p">]</span> <span class="o">=</span> <span class="n">reactions</span></div>

<div class="viewcode-block" id="Reaction.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Reaction.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">trigger</span><span class="p">,</span> <span class="n">reaction_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reactions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># reaction can be skill name (str) or effect data so need to handle both</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reaction_data</span><span class="o">.</span><span class="n">reaction</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">reaction</span> <span class="o">=</span> <span class="n">reaction_data</span><span class="o">.</span><span class="n">reaction</span>
                <span class="n">effect_dataclass_name</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">reaction</span> <span class="o">=</span> <span class="n">asdict</span><span class="p">(</span><span class="n">reaction_data</span><span class="o">.</span><span class="n">reaction</span><span class="p">)</span>
                <span class="n">effect_dataclass_name</span> <span class="o">=</span> <span class="n">reaction_data</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>

            <span class="n">_dict</span><span class="p">[</span><span class="n">trigger</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"required_opinion"</span><span class="p">:</span> <span class="n">reaction_data</span><span class="o">.</span><span class="n">required_opinion</span><span class="p">,</span>
                <span class="s2">"reaction"</span><span class="p">:</span> <span class="n">reaction</span><span class="p">,</span>
                <span class="s2">"effect_dataclass_name"</span><span class="p">:</span> <span class="n">effect_dataclass_name</span><span class="p">,</span>
                <span class="s2">"chance"</span><span class="p">:</span> <span class="n">reaction_data</span><span class="o">.</span><span class="n">chance</span><span class="p">,</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Reaction.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Reaction.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">reactions</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">trigger</span><span class="p">,</span> <span class="n">reaction_data</span> <span class="ow">in</span> <span class="n">serialised</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># reaction can be skill name (str) or effect data so need to handle both</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reaction_data</span><span class="p">[</span><span class="s2">"reaction"</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">reaction</span> <span class="o">=</span> <span class="n">reaction_data</span><span class="p">[</span><span class="s2">"reaction"</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">effect_dataclass</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s2">"scripts.engine.internal.definition"</span><span class="p">],</span> <span class="n">reaction_data</span><span class="p">[</span><span class="s2">"effect_dataclass_name"</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">reaction</span> <span class="o">=</span> <span class="n">effect_dataclass</span><span class="p">(</span><span class="n">reaction_data</span><span class="p">[</span><span class="s2">"reaction"</span><span class="p">])</span>

            <span class="n">_reaction_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"required_opinion"</span><span class="p">:</span> <span class="n">reaction_data</span><span class="p">[</span><span class="s2">"required_opinion"</span><span class="p">],</span>
                <span class="s2">"reaction"</span><span class="p">:</span> <span class="n">reaction</span><span class="p">,</span>
                <span class="s2">"chance"</span><span class="p">:</span> <span class="n">reaction_data</span><span class="p">[</span><span class="s2">"chance"</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="n">reactions</span><span class="p">[</span><span class="n">trigger</span><span class="p">]</span> <span class="o">=</span> <span class="n">ReactionData</span><span class="p">(</span><span class="o">**</span><span class="n">_reaction_data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Reaction</span><span class="p">(</span><span class="n">reactions</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Lifespan"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Lifespan">[docs]</a><span class="k">class</span> <span class="nc">Lifespan</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Holds info relating to the limited lifespan of an entity. E.g. temporary summons.</span>

<span class="sd">    Can be set to INFINITE, which prevents it being reduced each turn.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Lifespan.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Lifespan.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span></div>

<div class="viewcode-block" id="Lifespan.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Lifespan.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"duration"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Lifespan.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Lifespan.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Lifespan</span><span class="p">(</span><span class="n">serialised</span><span class="p">[</span><span class="s2">"duration"</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="Immunities"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Immunities">[docs]</a><span class="k">class</span> <span class="nc">Immunities</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Holds the details of anything the entity is immune to.</span>

<span class="sd">    Can be set to INFINITE, which prevents it being reduced each turn.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Immunities.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Immunities.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">immunities</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="c1"># handle mutable default</span>
        <span class="k">if</span> <span class="n">immunities</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">immunities</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">immunities</span>  <span class="c1"># name, duration</span></div>

<div class="viewcode-block" id="Immunities.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Immunities.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"active"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Immunities.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Immunities.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">Immunities</span><span class="p">(</span><span class="n">serialised</span><span class="p">[</span><span class="s2">"active"</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="CombatStats"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats">[docs]</a><span class="k">class</span> <span class="nc">CombatStats</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entities stats used for combat.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="CombatStats.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vigour</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">clout</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">skullduggery</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">bustle</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">exactitude</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set primary stats. Secondary stats pulled from library.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vigour</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">vigour</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">clout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skullduggery</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">skullduggery</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bustle</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">bustle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exactitude</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">exactitude</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vigour_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># cause, amount</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clout_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skullduggery_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bustle_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exactitude_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_max_health</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_stamina</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accuracy</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_burn</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_cold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_chemical</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_astral</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_mundane</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rush</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_max_health_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># cause, amount</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_stamina_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accuracy_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_burn_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_cold_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_chemical_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_astral_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resist_mundane_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rush_mod</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span></div>

<div class="viewcode-block" id="CombatStats.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"vigour"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vigour</span><span class="p">,</span>
            <span class="s2">"clout"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clout</span><span class="p">,</span>
            <span class="s2">"skullduggery"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skullduggery</span><span class="p">,</span>
            <span class="s2">"bustle"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bustle</span><span class="p">,</span>
            <span class="s2">"exactitude"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exactitude</span><span class="p">,</span>
            <span class="s2">"vigour_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vigour_mod</span><span class="p">,</span>
            <span class="s2">"clout_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clout_mod</span><span class="p">,</span>
            <span class="s2">"skullduggery_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skullduggery_mod</span><span class="p">,</span>
            <span class="s2">"bustle_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bustle_mod</span><span class="p">,</span>
            <span class="s2">"exactitude_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exactitude_mod</span><span class="p">,</span>
            <span class="s2">"max_health"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_health</span><span class="p">,</span>
            <span class="s2">"max_stamina"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_stamina</span><span class="p">,</span>
            <span class="s2">"accuracy"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accuracy</span><span class="p">,</span>
            <span class="s2">"resist_burn"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_burn</span><span class="p">,</span>
            <span class="s2">"resist_cold"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_cold</span><span class="p">,</span>
            <span class="s2">"resist_chemical"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_chemical</span><span class="p">,</span>
            <span class="s2">"resist_astral"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_astral</span><span class="p">,</span>
            <span class="s2">"resist_mundane"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_mundane</span><span class="p">,</span>
            <span class="s2">"rush"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rush</span><span class="p">,</span>
            <span class="s2">"max_health_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_health_mod</span><span class="p">,</span>
            <span class="s2">"max_stamina_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_stamina_mod</span><span class="p">,</span>
            <span class="s2">"accuracy_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accuracy_mod</span><span class="p">,</span>
            <span class="s2">"resist_burn_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_burn_mod</span><span class="p">,</span>
            <span class="s2">"resist_cold_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_cold_mod</span><span class="p">,</span>
            <span class="s2">"resist_chemical_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_chemical_mod</span><span class="p">,</span>
            <span class="s2">"resist_astral_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_astral_mod</span><span class="p">,</span>
            <span class="s2">"resist_mundane_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resist_mundane_mod</span><span class="p">,</span>
            <span class="s2">"rush_mod"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rush_mod</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="CombatStats.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="n">CombatStats</span><span class="p">(</span>
            <span class="n">serialised</span><span class="p">[</span><span class="s2">"vigour"</span><span class="p">],</span>
            <span class="n">serialised</span><span class="p">[</span><span class="s2">"clout"</span><span class="p">],</span>
            <span class="n">serialised</span><span class="p">[</span><span class="s2">"skullduggery"</span><span class="p">],</span>
            <span class="n">serialised</span><span class="p">[</span><span class="s2">"bustle"</span><span class="p">],</span>
            <span class="n">serialised</span><span class="p">[</span><span class="s2">"exactitude"</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">stats</span><span class="o">.</span><span class="n">_vigour_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"vigour_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_clout_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"clout_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_skullduggery_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"skullduggery_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_bustle_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"bustle_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_exactitude_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"exactitude_mod"</span><span class="p">]</span>

        <span class="n">stats</span><span class="o">.</span><span class="n">_max_health</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"max_health"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_max_stamina</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"max_stamina"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_accuracy</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"accuracy"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_burn</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_burn"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_cold</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_cold"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_chemical</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_chemical"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_astral</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_astral"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_mundane</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_mundane"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_rush</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"rush"</span><span class="p">]</span>

        <span class="n">stats</span><span class="o">.</span><span class="n">_max_health_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"max_health_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_max_stamina_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"max_stamina_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_accuracy_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"accuracy_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_burn_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_burn_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_cold_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_cold_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_chemical_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_chemical_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_astral_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_astral_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_resist_mundane_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"resist_mundane_mod"</span><span class="p">]</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">_rush_mod</span> <span class="o">=</span> <span class="n">serialised</span><span class="p">[</span><span class="s2">"rush_mod"</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">stats</span></div>

<div class="viewcode-block" id="CombatStats.amend_base_value"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.amend_base_value">[docs]</a>    <span class="k">def</span> <span class="nf">amend_base_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stat</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PrimaryStatType</span><span class="p">,</span> <span class="n">SecondaryStatType</span><span class="p">],</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Amend the base value of a stat</span>
<span class="sd">        """</span>
        <span class="n">current_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="n">stat</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="n">stat</span><span class="p">,</span> <span class="n">current_value</span> <span class="o">+</span> <span class="n">amount</span><span class="p">)</span></div>

<div class="viewcode-block" id="CombatStats.add_mod"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.add_mod">[docs]</a>    <span class="k">def</span> <span class="nf">add_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stat</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PrimaryStatType</span><span class="p">,</span> <span class="n">SecondaryStatType</span><span class="p">],</span> <span class="n">cause</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Amend the modifier of a stat. Returns True if successfully amended, else False.</span>
<span class="sd">        """</span>
        <span class="n">mod_to_amend</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="n">stat</span> <span class="o">+</span> <span class="s2">"_mod"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cause</span> <span class="ow">in</span> <span class="n">mod_to_amend</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Stat not modified as </span><span class="si">{</span><span class="n">cause</span><span class="si">}</span><span class="s2"> has already been applied."</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mod_to_amend</span><span class="p">[</span><span class="n">cause</span><span class="p">]</span> <span class="o">=</span> <span class="n">amount</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="CombatStats.remove_mod"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.CombatStats.remove_mod">[docs]</a>    <span class="k">def</span> <span class="nf">remove_mod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cause</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Remove a modifier from a stat. Returns True if successfully removed, else False.</span>
<span class="sd">        """</span>
        <span class="kn">from</span> <span class="nn">scripts.engine.core</span> <span class="kn">import</span> <span class="n">utility</span>

        <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">utility</span><span class="o">.</span><span class="n">get_class_members</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cause</span> <span class="ow">in</span> <span class="n">stat</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
                <span class="k">del</span> <span class="n">stat</span><span class="p">[</span><span class="n">cause</span><span class="p">]</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Modifier not removed as </span><span class="si">{</span><span class="n">cause</span><span class="si">}</span><span class="s2"> does not exist in modifier list."</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">_get_secondary_stat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stat</span><span class="p">:</span> <span class="n">SecondaryStatType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Get the value of the secondary stat</span>
<span class="sd">        """</span>
        <span class="n">stat_data</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">SECONDARY_STAT_MODS</span><span class="p">[</span><span class="n">stat</span><span class="p">]</span>

        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="n">stat</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vigour</span> <span class="o">*</span> <span class="n">stat_data</span><span class="o">.</span><span class="n">vigour_mod</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clout</span> <span class="o">*</span> <span class="n">stat_data</span><span class="o">.</span><span class="n">clout_mod</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">skullduggery</span> <span class="o">*</span> <span class="n">stat_data</span><span class="o">.</span><span class="n">skullduggery_mod</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bustle</span> <span class="o">*</span> <span class="n">stat_data</span><span class="o">.</span><span class="n">bustle_mod</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exactitude</span> <span class="o">*</span> <span class="n">stat_data</span><span class="o">.</span><span class="n">exactitude_mod</span>
        <span class="n">value</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">stat</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_get_mod_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stat</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PrimaryStatType</span><span class="p">,</span> <span class="n">SecondaryStatType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"_"</span> <span class="o">+</span> <span class="n">stat</span> <span class="o">+</span> <span class="s2">"_mod"</span><span class="p">)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">modifier</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="n">modifier</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vigour</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Influences healthiness. Never below 1.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vigour</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">PrimaryStat</span><span class="o">.</span><span class="n">VIGOUR</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Influences forceful things. Never below 1.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clout</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">PrimaryStat</span><span class="o">.</span><span class="n">CLOUT</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">skullduggery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Influences sneaky things. Never below 1.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skullduggery</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">PrimaryStat</span><span class="o">.</span><span class="n">SKULLDUGGERY</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bustle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Influences speedy things. Never below 1.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bustle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">PrimaryStat</span><span class="o">.</span><span class="n">BUSTLE</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">exactitude</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Influences preciseness. Never below 1.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exactitude</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_mod_value</span><span class="p">(</span><span class="n">PrimaryStat</span><span class="o">.</span><span class="n">EXACTITUDE</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_health</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Total damage an entity can take before death.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">MAX_HEALTH</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_stamina</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities energy to take actions.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">MAX_STAMINA</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities likelihood to hit.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">ACCURACY</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resist_burn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities resistance to burn damage.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RESIST_BURN</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resist_cold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities resistance to cold damage.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RESIST_COLD</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resist_chemical</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities resistance to chemical damage.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RESIST_CHEMICAL</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resist_astral</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities resistance to astral damage.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RESIST_ASTRAL</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">resist_mundane</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        An entities resistance to mundane damage.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RESIST_MUNDANE</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rush</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        How quickly an entity does things. Reduce time cost of actions.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_secondary_stat</span><span class="p">(</span><span class="n">SecondaryStat</span><span class="o">.</span><span class="n">RUSH</span><span class="p">))</span></div>


<div class="viewcode-block" id="Sight"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Sight">[docs]</a><span class="k">class</span> <span class="nc">Sight</span><span class="p">(</span><span class="n">NQPComponent</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    An entity's ability to see.</span>
<span class="sd">    """</span>

<div class="viewcode-block" id="Sight.__init__"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Sight.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sight_range</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sight_range</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">sight_range</span></div>

<div class="viewcode-block" id="Sight.serialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Sight.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"sight_range"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sight_range</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">_dict</span></div>

<div class="viewcode-block" id="Sight.deserialize"><a class="viewcode-back" href="../../../../scripts.engine.core.html#scripts.engine.core.component.Sight.deserialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialised</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Sight</span><span class="p">(</span><span class="o">**</span><span class="n">serialised</span><span class="p">)</span></div></div>
</pre></div>

          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2019-2020, Josh Snaith.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 3.5.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>